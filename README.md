## 🙌 안녕하세요. I LUNG VIEW를 만든 스인재 개발 1팀의 READ ME입니다!  

## ❓ I LUNG VIEW란?
- 스마트인재개발원 클라우드 기반 인공지능 서비스 엔지니어 과정의 마지막 프로젝트로, 기업의 멘토링을 받아 개발하였습니다.
- **I LUNG VIEW**는 **<u>의료 인프라가 부족한 지역에서 AI를 활용하여 결핵과 폐렴을 진단</u>** 하기 위해 만들었습니다.
- 전문가가 아니더라도 사용할 수 있는 직관적인 UI로, 보건소에서도 x-ray 이미지만 있다면 사용 가능합니다.
- mobileNetV4 모델을 사용하였으며, onnx 형태로 바꿔 경량화 함.

## 🙋‍♀️ 프로젝트 기간 
- 계획 및 설계 : 2024.12.09 ~ 2025.01.10
- 구현 : 2025.01.11 ~ 2025.02.13
   

<div align=center><h1>📚 STACKS</h1></div>

<div align=center> 
  <img src="https://img.shields.io/badge/java-007396?style=for-the-badge&logo=java&logoColor=white"> 
  <img src="https://img.shields.io/badge/python-3776AB?style=for-the-badge&logo=python&logoColor=white"> 
  <br>
  
  <img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white"> 
  <img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white"> 
  <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black"> 
  <img src="https://img.shields.io/badge/jquery-0769AD?style=for-the-badge&logo=jquery&logoColor=white">
  <br>
  
  <img src="https://img.shields.io/badge/mysql-4479A1?style=for-the-badge&logo=mysql&logoColor=white"> 
  <br>
  
  <img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=black"> 
  <img src="https://img.shields.io/badge/node.js-339933?style=for-the-badge&logo=Node.js&logoColor=white">
  <br>
  
  <img src="https://img.shields.io/badge/spring-6DB33F?style=for-the-badge&logo=spring&logoColor=white"> 
  <br>

  <img src="https://img.shields.io/badge/linux-FCC624?style=for-the-badge&logo=linux&logoColor=black"> 
  <img src="https://img.shields.io/badge/apache tomcat-F8DC75?style=for-the-badge&logo=apachetomcat&logoColor=white">
  <br>
  
  <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">
  <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white">
  <br>
</div>
<br>   

## 🙋‍♀️ 시스템 아키텍처 
![시스템 아키텍처](https://github.com/user-attachments/assets/b09e11ee-884d-4626-af27-2730e2583b68)
<br>

## 🙋‍♀️ 유스케이스
![유스케이스 다이어그램](https://github.com/user-attachments/assets/b756a3dc-56ff-4ef0-ab8c-f6395ae4e1a0)
<br>

## 🙋‍♀️ 서비스 흐름도
![서비스 흐름도](https://github.com/user-attachments/assets/21b39ebe-2b1b-4f1c-8e76-99998a2cb957)
<br>

## 🙋‍♀️ E-R 다이어그램
![E-R 다이어그램](https://github.com/user-attachments/assets/e7c6b405-3284-4d2a-b64c-2bbee0da69b3)
<br>

<div class=displayComposition>
   <div><h1>🖥️ 화면 구성</h1></div>
   <h3>1. 로그인</h3>
   <img src="https://github.com/user-attachments/assets/cacf6c92-78d9-467e-a21d-bf729e890257">
   <br>
   
   <h3>2. 회원가입</h3>
   <img src="https://github.com/user-attachments/assets/19072000-8d86-4069-bc8c-79b51eabb9aa">
   <br>

   <h3>2-2. 기관 검색 & 등록</h3>
   <img width="1273" alt="기관명 주소" src="https://github.com/user-attachments/assets/f653b76a-f3c2-47d3-b4cf-8b7bb739fe89" />
   <br>
   
   <h3>3. 아이디 찾기</h3>
   <img width="1262" alt="아이디 찾기" src="https://github.com/user-attachments/assets/522b61fa-a39e-4e5c-b1bb-259c11b01d38" />
   <br>

   <h3>4. 비밀번호 찾기</h3>
   <img width="1262" alt="비밀번호 찾기" src="https://github.com/user-attachments/assets/9fb85cd0-ebf2-4700-856a-e3d0a8699cc8" />
   <br>
   
   <h3>4-2. 이메일 인증</h3>
   <img width="184" alt="이메일 인증번호" src="https://github.com/user-attachments/assets/633f2cc8-29ae-4b98-b220-f91bb12e2d0e" />
   <br>

   <h3>5. 메인 화면</h3>
   <img width="1016" alt="환자 리스트" src="https://github.com/user-attachments/assets/685c87fa-c45a-460d-924b-c4de6ae033ad" />
   <br>

   <h3>5-2. 사진 업로드</h3>
   <img width="1020" alt="xray등록" src="https://github.com/user-attachments/assets/01205dce-98ba-4977-bb69-202d231fd667" />
   <img width="1023" alt="xray삭제" src="https://github.com/user-attachments/assets/6ca2379f-b8f2-42da-988c-5dc9a0ebd2a0" />
   <h5>환자에 대한 사진을 등록 및 삭제, 확대/축소 할 수 있다.</h5>
   <br>

   <h3>5-3. 과거 사진</h3>
   <img width="1016" alt="과거 xray정보 불러오기" src="https://github.com/user-attachments/assets/19be63a4-ee6e-4eab-9b0f-cc19897e212d" />
   <img src="https://github.com/user-attachments/assets/3bafcc0a-4a47-4415-bfb1-740d7cdb7f80">
   <h5>환자 리스트에서 환자를 클릭하면 환자에 대한 과거 사진들을 볼 수 있으며, 새 등록한 사진과 비교하여 조회할 수 있다.</h5>
   <br>

   <h3>5-4. 환자 검색</h3>
   <img width="1017" alt="환자 검색기능" src="https://github.com/user-attachments/assets/62df39f5-da6c-4a8a-9972-6e764e61d0a9" />
   <br>

   <h3>6. 과거 진단 리스트</h3>
   <img width="1023" alt="과거 소견서" src="https://github.com/user-attachments/assets/5fc362a9-3c6a-4c6d-804d-f4423ead3c0d" />
   과거에 진단 받은 내용들을 조회할 수 있다.
   <br>

   <h3>7. 환자 등록</h3>
   <img width="1019" alt="환자 등록 주소" src="https://github.com/user-attachments/assets/f80252ce-4b3f-4b10-b1fc-7ff326a360bc" />
   <br>

   <h3>8. 환자 수정</h3>
   <img src="https://github.com/user-attachments/assets/c21af8d4-6ea6-4a4f-a9a1-6704ad3ded1c">
   <br>

   <h3>9. 진단</h3>
   <img width="1021" alt="진단 결과페이지" src="https://github.com/user-attachments/assets/c9cda28a-4589-40b9-bc6e-395e2fd7287a" />
   <img width="1019" alt="거리순 추천" src="https://github.com/user-attachments/assets/b3db4d0b-feed-4ca8-a93b-ada6d68dba84" />
   <h5>새로 등록한 사진을 활용하여 새 진단을 할 수 있으며, 해당 환자의 등록된 거리에 따라 가장 가까운 병원들을 알려줄 수 있다.</h5>
   <br>

   <h3>10. 소견서 출력</h3>
   <img width="1019" alt="출력페이지" src="https://github.com/user-attachments/assets/e0f4145e-fc81-48b7-8dbc-40f201730219" />
   <img width="1020" alt="출력" src="https://github.com/user-attachments/assets/3b297bd3-1af1-4cea-8882-c9cd880a9e70" />
   <br>
</div>

## 🤖 딥러닝 모델 개요
I LUNG VIEW는 MobileNetV4를 기반으로 한 AI 모델을 활용하여 X-ray 이미지를 분석하고, 결핵 및 폐렴 여부를 판별합니다.

- 데이터셋: **[공개 데이터셋명] + 자체 수집 데이터**
- 모델 구조: **MobileNetV4**
- 최적화 및 변환: **ONNX 변환 후 ONNX Runtime 사용**
- 배포 방식: **Flask API로 웹과 연동**
  
## 🏋️ 데이터 전처리 및 학습
- **데이터 전처리**
  - X-ray 이미지 크기: **224x224**
  - 정규화: **mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225]**
  - 증강 기법: **좌우반전, 밝기 조절, 랜덤 크롭**
  
- **모델 학습**
  - 사용 프레임워크: **PyTorch**
  - 하이퍼파라미터: **Batch size = 32, Learning rate = 0.001, Epochs = 50**
  - 손실 함수: **CrossEntropyLoss**
  - 옵티마이저: **Adam**
  
## 📊 성능 평가
| Metric  | Accuracy | Precision | Recall | F1-score |
|---------|----------|----------|---------|---------|
| 결핵(TB) | 92.3%    | 91.5%    | 89.7%   | 90.6%   |
| 폐렴(Pneumonia) | 94.1%    | 93.8%    | 92.5%   | 93.1%   |

<div class="troubleShouting">
   <div><h1>⚡ 트러블 슈팅</h1></div>
   <h4>1. react-router-dom을 사용하여 react페이지를 만들었는데 새로고침 또는 url로 직접 접근하면 404에러가 나오는 문제가 생겼다.</h4>
   <img src="https://github.com/user-attachments/assets/faaaee79-3632-4250-9d63-0115b511b1b0">
   <img src="https://github.com/user-attachments/assets/3605b13d-bdaf-49ce-8431-ae831be53eb9">
   <h4>해결 방안으로 apache 포기하고 nginx 로 리엑트파일을 배포하는걸로 변경. Nginx로 배포하는 것이 더 간단하고 효율적. 특히, React SPA (Single Page Application) 를 다룰 때 Nginx는 정적 파일 서빙에 매우 적합</h4>

   <h4>2. 특정 클래스에 대한 평가지표가 유독 낮게 측정되었다.</h4>
   <img src="https://github.com/user-attachments/assets/096f1a09-0def-4c60-a759-7a39af9b3e77">
   <h4>배치사이즈와 시행횟수등을 많이 늘려주었고, 이미지 증강을 추가적으로 하여 이미지 불균형을 줄여주었다.</h4>
   <img src="https://github.com/user-attachments/assets/c160dcd9-1e10-4d4e-b4af-af0493c38f54">
   <h4>학습하는 과정에서 초반부터 손실값(Loss)가 많이 올랐었지만 학습이 계속될 수록 개선되는 모습을 보여주었으며, 최종적으로 평가지표도 전체적으로 안정되는 모습을 보여주었다.</h4>
</div>


## 👨‍👩‍👧‍👦 팀원 소개
![팀원 소개](https://github.com/user-attachments/assets/18851e6c-c6f4-436d-8dce-9de22594c6c5)
<br>

## 🎥 시연 영상
[![시연 영상](https://github.com/user-attachments/assets/5be7b976-f242-4d7d-b873-d17d19fd2aed)](https://github.com/user-attachments/assets/6aacf66f-6063-463b-9ada-76769a1ce78c)
<br>
